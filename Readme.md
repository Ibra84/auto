# Media Data Upload Service

Этот проект представляет собой веб-приложение на Go, которое позволяет загружать медиафайлы (фото и видео), сохранять их в базе данных PostgreSQL и отправлять данные на внешний сервер.

## Функциональность

- Принимает медиафайлы и метаданные через POST-запросы.
- Сохраняет файлы на локальном диске.
- Сохраняет метаданные и пути к файлам в базе данных PostgreSQL.
- Отправляет данные на внешний сервер для дальнейшей обработки.
- Обновляет статусы запросов в базе данных после успешной отправки данных на внешний сервер.

## Установка

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/yourusername/your-repo.git
    cd your-repo
    ```

2. **Установите зависимости:**

    Убедитесь, что у вас установлен Go. Затем установите необходимые зависимости с помощью:

    ```bash
    go mod tidy
    ```

3. **Настройте переменные окружения:**

    Создайте файл `.env` в корневой директории проекта и добавьте строку подключения к базе данных:

    ```env
    DSN=postgres://username:password@localhost:5432/yourdbname?sslmode=disable
    ```

4. **Запустите сервер:**

    Сначала убедитесь, что база данных PostgreSQL запущена и доступна. Затем выполните:

    ```bash
    go run cmd/main.go
    ```

    Сервер будет запущен на порту `8080` по умолчанию.

## Использование

Для загрузки медиафайлов отправьте POST-запрос на `/upload` с параметрами:

- `car_number`: номер автомобиля (строка)
- `timestamp`: временная метка (строка)
- `photo1`: первое фото (файл)
- `photo2`: второе фото (файл)
- `photo3`: третье фото (файл)
- `video`: видео (файл)

Пример использования с помощью `curl`:

```bash
curl -X POST http://localhost:8080/upload \
    -F "car_number=ABC123" \
    -F "timestamp=2024-09-15T12:34:56" \
    -F "photo1=@path/to/photo1.jpg" \
    -F "photo2=@path/to/photo2.jpg" \
    -F "photo3=@path/to/photo3.jpg" \
    -F "video=@path/to/video.mp4"
